---
title: "Scrape of New Haven Housing Data"
author: "Kat Devlin"
date: "2017/9/21"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Task: create a data.frame with 100 rows and three (3) columns:
 - Assessment (for property 25 this is $87,080 and should be 87080
   as a numeric value)
 - Bedrooms (for property 25 this is 2)
 - Living Area (for property 25 this is 998):

```{r URL_setup}
baseurl <- file.path("http://www.stat.yale.edu/~jay/230/Homework",
  "Homework9/NewHavenExample/XXX.html")
x <- data.frame(Assessment=rep(NA, 100), Bedrooms=rep(NA,100),
                LvngArea=rep(NA,100))

# Just doing this for the output
# options( warn = -1 )
```

## And here is the loop to create the dataframe.


```{r loop}
for (i in 1:100) {
  thisurl <- gsub("XXX", i, baseurl)
  z <- scan(thisurl, what="", sep="\n")
  temp <- z[grep(".*GenAssessment.*</dd>", z)]
  temp <- gsub(".*\\$([0-9,]+).*", "\\1", temp)
  temp <- gsub(",","", temp)
  temp2 <- z[grep("Bed", z, fixed=TRUE)]
  temp2 <- gsub(".*([0-9]+).*", "\\1", temp2)
  temp3 <- z[grep("BldArea", z, fixed=TRUE)]
  temp3 <- gsub(".*>([0-9]+).*", "\\1", temp3)
  x$Assessment[i] <- as.numeric(temp)
  x$Bedrooms[i] <- as.numeric(temp2)
  x$LvngArea[i] <- as.numeric(temp3)
} 
```

My thinking is Living Area = 0 makes sense for non-residential
properties, so no need to make NA. However, if there is no 
living area there cannot be a bedroom, so makes more sense to 
have bedrooms with NAs than listed with 0 bedrooms.

# Save data as .csv.

```{r csv}
write.csv(x, file="HW9_Devlin.csv")
```

# This is a check required as part of the original assignment:

```{r check, echo = FALSE}
head(x)
tail(x)

for (i in 1:ncol(x)) {
  print(str(x[,i])) 
}
```
